# -*- coding: utf-8 -*-
require 'spec_helper'

describe Vnet::NodeModules::Rpc do
  let(:node) { double(:node) }
  let(:node_id) { double(:node_id) }

  before(:each) do
    mock_dcell_me_id(node, node_id)

    allow(Vnet::Models::Network).to receive(:all).and_return([{uuid: "test-uuid"}])
  end

  subject do
    Vnet::NodeModules::Rpc.new.execute(:network, :all)
  end

  it { should be_a Array }
  it { expect(subject.size).to eq 1 }
  it { expect(subject.first).to be_a Hash }
  it { expect(subject.first[:uuid]).to eq "test-uuid" }
end
